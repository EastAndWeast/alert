# AI 沟通记录 - Large Trade (USD) 需求讨论

## 时间：2026-02-09
## 参与者：USER, Antigravity

### 讨论议题：Large Trade (USD) 规则评估

#### 1. 需求分析与匹配度
- **客户需求**：
    1. 监控 MT4/MT5 开仓的 USD 等值金额。
    2. 支持多币种账户（JPY, EUR 等）、美分账户（USC）、虚拟币。
    3. 频率控制：限定时间窗口内的报警次数（超过多少时间，报几次）。
- **系统当前设计评估**：
    - **多币种与美分转换**：**完全满足**。方案 2-Large_Trade_USD_Value_Alert_Solution.md 已定义了折算逻辑和账户组过滤，前端 ules.js 也留有 cent_account_groups 接口。
    - **虚拟币支持**：**支持**。虚拟币本质上是 Lots * Price 的计算，系统通用的 Rate Engine 能够处理。
    - **频率控制 (关键缺失)**：**不完全满足**。当前设计仅有 Min_Alert_Interval（冷却时间），但缺乏用户要求的在 [T] 时间内，最多报 [N] 次的精细化频率控制逻辑。

#### 2. 是否过度设计
- **评估结果**：**无过度设计**。
- **现有的附加功能**：
    - Cent Account Groups：非常必要的实战设计，因为美分账户数据量级大。
    - Rate Source：必要，多币种风控的基础。
- **总结**：现有参数均为针对复杂账户体系的刚需设计。

#### 3. 专业建议与缺失功能分析
- **频率控制补齐**：用户提到的报几次是风控中常见的报警风暴抑制需求。建议在参数中增加 Time_Window (时间窗口) 和 Max_Alert_Count (最大报警次数)。
- **提示词乱码修复**：已完成。后续将严格使用 UTF-8 编码进行文件操作。

---